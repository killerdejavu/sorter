(()=>{function e(){console.log("Sorting and grouping tabs"),chrome.tabs.query({},e=>{e.sort((e,t)=>{let r=e.url.split("/")[2],o=t.url.split("/")[2];return r===o?e.lastAccessed-t.lastAccessed:r.localeCompare(o)}).forEach((e,t)=>{chrome.tabs.move(e.id,{index:t})})}),chrome.tabs.query({},e=>{chrome.tabGroups.query({},t=>{let r=t.reduce((e,t)=>(e[t.title]=t.id,e),{});Object.entries(e.reduce((e,t)=>{let r=t.url.split("/")[2];return e[r]||(e[r]=[]),e[r].push(t.id),e},{})).forEach(([e,r])=>{let o=t.find(t=>t.title===e);o?chrome.tabs.group({groupId:o.id,tabIds:r}):chrome.tabs.group({tabIds:r},t=>{chrome.tabGroups.update(t,{title:e})})}),chrome.tabs.query({active:!0},e=>{let o=r[e[0].url.split("/")[2]];t.forEach(e=>{e.id!==o&&chrome.tabGroups.update(e.id,{collapsed:!0})})})})})}chrome.commands.onCommand.addListener(t=>{"sort"===t&&e()}),setInterval(e,3e5)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJtYXBwaW5ncyI6Ik0sUyxJQUVFLFFBQUEsR0FBQSxDQUFBLDZCQUNBLE9BQUEsSUFBUSxDQUFBLEtBQVIsQ0FBQSxDQUFBLEVBQUEsQUFBQSxJQUNtQixBQWNrQixFQWRyQyxJQUFBLENBQUEsQ0FBQSxFQUFBLEtBQ0UsSUFBQSxFQUFNLEVBQUEsR0FBYSxDQUFBLEtBQUssQ0FBQSxJQUFNLENBQUEsRUFBRyxDQUMvQixFQUFNLEVBQUEsR0FBQSxDQUFVLEtBQUssQ0FBQyxJQUFBLENBQUssRUFBQyxRQUk1QixBQUFBLElBQUksRUFHSixFQUFBLEtBQUEsT0FBZSxDQUFBLEVBQUEsWUFBZixDQUdGLEVBQUEsYUFBQSxDQUFBLEVBQ0EsR0FDbUMsT0FBQSxDQUFBLENBQUEsRUFBQSxLQUNuQyxPQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsRUFBQSxFQUFBLENBQUEsT0FBQSxDQUFBLEVBQ0YsRUFDQSxHQUdFLE9BQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLEVBQUEsQUFBQSxJQUVFLE9BQUEsU0FBTSxDQUFBLEtBQUEsQ0FBQSxDQUFBLEVBQUEsQUFBYyxJQUNsQixJQUFBLEVBQUksRUFBZSxNQUFHLENBQUEsQ0FBQSxFQUFXLEtBQ2pDLENBQUEsQ0FBQSxFQUFBLEtBQUEsQ0FBQSxDQUFBLEVBQUEsRUFBQSxDQUNDLEdBRUgsQ0FBQSxHQWtCeUMsT0FBQSxPQUFBLENBZHZDLEFBY3VDLEVBZGpDLE1BQVMsQ0FBQSxDQUFBLEVBQVEsS0FLdkIsSUFBQSxFQUFPLEVBQVAsR0FBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLENBQUEsRUFBQSxDQU1BLE9BTEYsQ0FBSSxDQUFKLEVBQUEsR0FFQSxDQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQUFBQSxFQUVBLENBQUEsQ0FBQSxFQUFPLENBQUEsSUFBQSxDQUFBLEVBQVEsRUFBQSxFQUNiLENBQ0EsRUFBQSxDQUFBLElBRXVDLE9BQUEsQ0FBQSxDQUFBLENBQUEsRUFBQSxFQUFBLElBQWMsSUFBQSxFQUFBLEVBQUEsSUFBQSxDQUFBLEFBQUEsR0FBQSxFQUFBLEtBQUEsR0FBQSxHQUNuRCxFQU9KLE9BQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUVBLFFBQUEsRUFBQSxFQUFBLFFBQ0EsQ0FBb0IsR0FSaEIsT0FBQSxJQUFBLENBQUEsS0FBQSxDQUFPLFFBQUEsQ0FBSyxFQUFaLEFBQUEsSUFDRSxPQUFBLFNBQUEsQ0FBUyxNQUFBLENBQUEsRUFBVCxDQUFBLE1BQUEsQ0FBQSxFQUNBLEVBT0osR0FJQSxPQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBVSxRQUFRLENBQWxCLEVBQUEsQUFBQSxJQUUyRCxJQUFBLEVBQUEsQ0FBQSxDQURyRCxBQUNxQyxBQUFnQixDQUQxQyxDQUFBLEVBQUEsQ0FDMEIsR0FBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLENBQUEsRUFBQSxDQUFnQixDQUc3RCxFQUFBLE9BQUEsQ0FBQSxBQUFBLElBQ0YsRUFBQSxFQUFBLEdBQUEsR0FDRixPQUFBLFNBQUEsQ0FBQSxNQUFBLENBQUEsRUFBQSxFQUFBLENBQUEsQ0FBQSxXQUFBLENBQUEsRUFJSyxFQUNMLEVBR0YsRUFFQSxFQUNBLEMsTyxRLEMsUyxDLFcsQyxBLEksUyxHLEcsRyxZLEUiLCJzb3VyY2VzIjpbInNyYy9iYWNrZ3JvdW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZnVuY3Rpb24gc29ydEFuZEdyb3VwVGFicygpIHtcbiAgLy8gZ2V0IGFsbCB0aGUgdGFicyBpbiBjaHJvbWUgYW5kIHRoZW4gc29ydCBpdCBhcyBwZXIgZG9tYWluIG5hbWVcbiAgY29uc29sZS5sb2coJ1NvcnRpbmcgYW5kIGdyb3VwaW5nIHRhYnMnKTtcbiAgY2hyb21lLnRhYnMucXVlcnkoe30sICh0YWJzKSA9PiB7XG4gICAgY29uc3Qgc29ydGVkVGFicyA9IHRhYnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZG9tYWluQSA9IGEudXJsLnNwbGl0KCcvJylbMl07XG4gICAgICBjb25zdCBkb21haW5CID0gYi51cmwuc3BsaXQoJy8nKVsyXTtcblxuICAgICAgLy8gIGRvIHNlY29uZCBsZXZlbCBzb3J0aW5nIGJ5IGxhc3RBY2Nlc3NlZCB0aW1lXG4gICAgICBpZiAoZG9tYWluQSA9PT0gZG9tYWluQikge1xuICAgICAgICByZXR1cm4gYS5sYXN0QWNjZXNzZWQgLSBiLmxhc3RBY2Nlc3NlZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkb21haW5BLmxvY2FsZUNvbXBhcmUoZG9tYWluQik7XG4gICAgfSk7XG5cbiAgICAvLyB1cGRhdGUgdGhlIHRhYiB3aXRoIHRoZSBzb3J0ZWQgdGFic1xuICAgIHNvcnRlZFRhYnMuZm9yRWFjaCgodGFiLCBpbmRleCkgPT4ge1xuICAgICAgY2hyb21lLnRhYnMubW92ZSh0YWIuaWQsIHsgaW5kZXggfSk7XG4gICAgfSk7XG4gIH0pXG4gIC8vIE5vdyBmb3IgdGhlIHRhYnMgd2l0aCBzYW1lIGRvbWFpbiwgYnVpbGQgdGFnIGdyb3VwIGFuZCBsYWJlbCB0aGVtIGJ5IHRoZSBkb21haW4gbmFtZVxuICAvLyBhbmQgYWxzbyBjb2xsYXBzZSB0aGUgdGFibCBncm91cCBhcGFydCBmcm9tIHRoZSBhY3RpdmUgdGFiXG4gIGNocm9tZS50YWJzLnF1ZXJ5KHt9LCAodGFicykgPT4ge1xuICAgIC8vIHVzZSB0aGUgdGFiR3JvdXBzIGFwaVxuICAgIGNocm9tZS50YWJHcm91cHMucXVlcnkoe30sICh0YWJHcm91cHMpID0+IHtcbiAgICAgIGNvbnN0IHRhYkdyb3VwTWFwID0gdGFiR3JvdXBzLnJlZHVjZSgoYWNjLCB0YWJHcm91cCkgPT4ge1xuICAgICAgICBhY2NbdGFiR3JvdXAudGl0bGVdID0gdGFiR3JvdXAuaWQ7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSk7XG5cbiAgICAgIC8vIGJ1aWxkIHRoZSB0YWJNYXBcbiAgICAgIGNvbnN0IHRhYk1hcCA9IHRhYnMucmVkdWNlKChhY2MsIHRhYikgPT4ge1xuICAgICAgICAvLyBidWlsZCBtYXAgYnkgZG9tYWluXG5cbiAgICAgICAgY29uc3QgZG9tYWluID0gdGFiLnVybC5zcGxpdCgnLycpWzJdO1xuICAgICAgICBpZiAoIWFjY1tkb21haW5dKSB7XG4gICAgICAgICAgYWNjW2RvbWFpbl0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBhY2NbZG9tYWluXS5wdXNoKHRhYi5pZCk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSk7XG5cbiAgICAgIC8vIHRoZXJlIGlzIHNvbWV0aGluZyB3cm9uZywgZWFjaCB0YWIgaGFzIGl0cyBvd24gc3ViZ3JvdXAgcmlnaHQgbm93XG4gICAgICAvLyB3ZSBuZWVkIHRvIGdyb3VwIHRoZW0gYnkgZG9tYWluIG5hbWVcbiAgICAgIE9iamVjdC5lbnRyaWVzKHRhYk1hcCkuZm9yRWFjaCgoW2RvbWFpbiwgdGFiSWRzXSkgPT4ge1xuICAgICAgICBjb25zdCB0YWJHcm91cCA9IHRhYkdyb3Vwcy5maW5kKCh0YWJHcm91cCkgPT4gdGFiR3JvdXAudGl0bGUgPT09IGRvbWFpbik7XG4gICAgICAgIGlmICghdGFiR3JvdXApIHtcbiAgICAgICAgICBjaHJvbWUudGFicy5ncm91cCh7IHRhYklkcyB9LCAoZ3JvdXBJZCkgPT4ge1xuICAgICAgICAgICAgY2hyb21lLnRhYkdyb3Vwcy51cGRhdGUoZ3JvdXBJZCwgeyB0aXRsZTogZG9tYWluIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNocm9tZS50YWJzLmdyb3VwKHtcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRhYkdyb3VwLmlkLFxuICAgICAgICAgICAgdGFiSWRzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gY29sbGFwc2UgYWxsIHRoZSB0YWJHcm91cHMgYXBhcnQgZnJvbSB0aGUgYWN0aXZlIHRhYlxuICAgICAgY2hyb21lLnRhYnMucXVlcnkoeyBhY3RpdmU6IHRydWUgfSwgKGFjdGl2ZVRhYnMpID0+IHtcbiAgICAgICAgY29uc3QgYWN0aXZlVGFiID0gYWN0aXZlVGFic1swXTtcbiAgICAgICAgY29uc3QgZG9tYWluID0gYWN0aXZlVGFiLnVybC5zcGxpdCgnLycpWzJdO1xuICAgICAgICBjb25zdCBhY3RpdmVUYWJHcm91cElkID0gdGFiR3JvdXBNYXBbZG9tYWluXTtcblxuICAgICAgICB0YWJHcm91cHMuZm9yRWFjaCgodGFiR3JvdXApID0+IHtcbiAgICAgICAgICBpZiAodGFiR3JvdXAuaWQgIT09IGFjdGl2ZVRhYkdyb3VwSWQpIHtcbiAgICAgICAgICAgIGNocm9tZS50YWJHcm91cHMudXBkYXRlKHRhYkdyb3VwLmlkLCB7IGNvbGxhcHNlZDogdHJ1ZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbmNocm9tZS5jb21tYW5kcy5vbkNvbW1hbmQuYWRkTGlzdGVuZXIoKGNvbW1hbmQpID0+IHtcbiAgaWYgKGNvbW1hbmQgPT09ICdzb3J0Jykge1xuICAgIHNvcnRBbmRHcm91cFRhYnMoKTtcbiAgfVxufSk7XG5cbi8vIGNhbGwgc29ydEFuZEdyb3VwIGV2ZXJ5IDUgbWlucyBhcyB3ZWxsXG5zZXRJbnRlcnZhbChzb3J0QW5kR3JvdXBUYWJzLCA1ICogNjAgKiAxMDAwKTsiXSwibmFtZXMiOltdLCJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC5IQVNIX1JFRl8zZmE4MWM0ZGY4YjM5ZmI2LmpzLm1hcCJ9
